<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;light&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/images/favicon.png"><link rel="icon" href="/images/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content="使用Hyper-V虚拟机软件在Windows中搭建OpenWRT路由系统以接管Windows的网络设置，实现透明代理或其它路由相关的功能。"><meta name="author" content="Vlist"><meta name="keywords" content=""><title>在Windows中使用Hyper-V搭建OpenWRT环境 - Vlist&#39;s Blog</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"vlist.gitee.io",root:"/",version:"1.8.11",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}},search_path:"/local-search.xml"}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>Vlist's Blog</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(https://bing.biturl.top/?resolution=1920&format=image&index=0&mkt=zh-CN) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="在Windows中使用Hyper-V搭建OpenWRT环境"></span><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2020-08-28 20:14" pubdate>2020年8月28日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 2.3k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 34 分钟</span></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">在Windows中使用Hyper-V搭建OpenWRT环境</h1><div class="markdown-body"><h2 id="0-前言"><a href="#0-前言" class="headerlink" title="0. 前言"></a>0. 前言</h2><p>​ 由于众所周知的原因，在特定地区的程序员访问GitHub以及Google等网站及服务会受到限制和审查，且在本地系统中使用特定的软件有可能造成系统中不受控制的访问。所以为了更好地学习计算机相关的技术，我们接下来将使用Hyper-V虚拟机软件在Windows中搭建OpenWRT路由系统以接管Windows中的访问流量，以达到操作系统层级的透明代理。</p><p><strong>请遵守当地法律法规</strong></p><p><del>Big brother is watching you</del></p><p><em>注：在可控的网络环境中建议使用单独的设备来搭建旁路路由或主路由的透明代理，本方案建议用于本机或可信设备的透明代理，Linux及macOS同样具有参考价值</em></p><h2 id="1-准备"><a href="#1-准备" class="headerlink" title="1. 准备"></a>1. 准备</h2><h3 id="1-1-硬件要求"><a href="#1-1-硬件要求" class="headerlink" title="1.1 硬件要求"></a>1.1 硬件要求</h3><ul><li>至少有一张以太网卡（不然还上什么网）</li><li>灵活的双手，聪明的大脑，勇于尝试的心</li></ul><h3 id="1-2-软件要求"><a href="#1-2-软件要求" class="headerlink" title="1.2 软件要求"></a>1.2 软件要求</h3><ul><li>Windows 10 专业版或企业版（需要Hyper-V环境）</li><li>注：Linux可使用KVM虚拟机和brctl工具来搭建相应环境，macOS可使用Parallel Desktop等虚拟机软件，理论上在任何可运行Docker的操作系统中都可以使用Docker来搭建本环境</li></ul><h2 id="2-搭建运行环境"><a href="#2-搭建运行环境" class="headerlink" title="2. 搭建运行环境"></a>2. 搭建运行环境</h2><h3 id="2-1-开启Hyper-V"><a href="#2-1-开启Hyper-V" class="headerlink" title="2.1 开启Hyper-V"></a>2.1 开启Hyper-V</h3><p>在Windows中打开 控制面板 &gt; 程序 &gt; 程序和功能 &gt; 启用或关闭 Windows 功能，勾选Hyper-V</p><img src="/2020/08/HyperWRT/image-20200827215845196.webp" srcset="/img/loading.gif" lazyload alt="image-20200827215845196" style="zoom:33%"><p>确定后Windows将自动配置Hyper-V功能，并要求重启</p><h3 id="2-2-下载OpenWRT镜像"><a href="#2-2-下载OpenWRT镜像" class="headerlink" title="2.2 下载OpenWRT镜像"></a>2.2 下载OpenWRT镜像</h3><p>可从OpenWRT项目官方网站下载stable release或snapshot镜像，推荐使用国内的清华镜像源</p><p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/19.07.3/targets/x86/64/openwrt-19.07.3-x86-64-combined-squashfs.img.gz">OpenWRT清华镜像</a></p><p>也有国内开发者制作的整合包，可自行寻找下载，此处推荐Github @SulingGG配置并自动编译的OpenWRT镜像</p><p><a target="_blank" rel="noopener" href="https://mlapp.cn/">作者博客</a></p><p><a target="_blank" rel="noopener" href="https://github.com/SuLingGG/OpenWrt-Rpi/actions?query=workflow:%22Build+x86_64+Project+OpenWrt%22">下载地址</a></p><h3 id="2-3-转换镜像格式"><a href="#2-3-转换镜像格式" class="headerlink" title="2.3 转换镜像格式"></a>2.3 转换镜像格式</h3><p>下载并解压后可看到，本系统镜像以img格式分发，而微软的Hyper-V不支持直接将img格式镜像作为虚拟机硬盘导入，此处需要进行格式转换。可使用StarWind V2V Converter</p><p><a target="_blank" rel="noopener" href="https://www.starwindsoftware.com/starwind-v2v-converter#download">下载地址</a></p><p>安装后打开StarWind V2V Image Converter，根据软件提示选中img格式的系统镜像，转换为VHDX格式的硬盘镜像</p><img src="/2020/08/HyperWRT/image-20200827221117190.webp" srcset="/img/loading.gif" lazyload alt="image-20200827221117190" style="zoom:50%"><p>一路选择下一步，你会在img目录下看到一个转换完成的.vhdx文件，稍后需要将vhdx文件导入Hyper-V虚拟机</p><h2 id="3-创建Hyper-V虚拟机"><a href="#3-创建Hyper-V虚拟机" class="headerlink" title="3. 创建Hyper-V虚拟机"></a>3. 创建Hyper-V虚拟机</h2><h3 id="3-1-添加虚拟交换机"><a href="#3-1-添加虚拟交换机" class="headerlink" title="3.1 添加虚拟交换机"></a>3.1 添加虚拟交换机</h3><p>开启Windows的Hyper-V功能后可以在开始菜单中搜索到 <code>Hyper-V 管理器</code>，如图所示</p><img src="/2020/08/HyperWRT/image-20200827221831511.webp" srcset="/img/loading.gif" lazyload alt="image-20200827221831511" style="zoom:33%"><p>由于我自己已经建立过虚拟机实例，所以有显示条目。</p><p>首先点击右侧的<code>虚拟交换机管理器</code></p><h4 id="3-1-1-添加桥接物理网卡的虚拟WAN"><a href="#3-1-1-添加桥接物理网卡的虚拟WAN" class="headerlink" title="3.1.1 添加桥接物理网卡的虚拟WAN"></a>3.1.1 添加桥接物理网卡的虚拟WAN</h4><p>首先创建新的虚拟交换机，选择<code>外部</code></p><img src="/2020/08/HyperWRT/image-20200827222047148.webp" srcset="/img/loading.gif" lazyload alt="image-20200827222047148" style="zoom:50%"><p>稍后此虚拟交换机将作为WAN口连接至OpenWRT虚拟机，由于本虚拟机的作为上级路由的角色提供服务，所以选择桥接物理网卡</p><p>选择<code>外部网络</code>，在下拉选项卡中选中电脑连接外部网络的物理网卡，此处我使用的是笔记本内置的Killer系列的无线网卡</p><img src="/2020/08/HyperWRT/image-20200827222316744.webp" srcset="/img/loading.gif" lazyload alt="image-20200827222316744" style="zoom:50%"><p>名称可以随意填写</p><p>注意：由于现在还没有完全配置，可先勾选<strong>允许管理操作系统共享此网络适配器</strong>，待配置**完成后再取消</p><h4 id="3-1-2-添加连接操作系统的虚拟LAN"><a href="#3-1-2-添加连接操作系统的虚拟LAN" class="headerlink" title="3.1.2 添加连接操作系统的虚拟LAN"></a>3.1.2 添加连接操作系统的虚拟LAN</h4><p>返回至<code>新建虚拟网络交换机</code>，创建类型为<code>内部</code>的虚拟交换机</p><img src="/2020/08/HyperWRT/image-20200827222838397.webp" srcset="/img/loading.gif" lazyload alt="image-20200827222838397" style="zoom:50%"><p>如图所示配置，此虚拟交换机将作为虚拟路由的LAN口连接虚拟机和本机操作系统，名称可以随意填写，但要自己分清。</p><h3 id="3-2-添加虚拟机"><a href="#3-2-添加虚拟机" class="headerlink" title="3.2 添加虚拟机"></a>3.2 添加虚拟机</h3><p>回到Hyper-V管理器，点击右侧 新建 &gt; 虚拟机</p><img src="/2020/08/HyperWRT/image-20200827223044102.webp" srcset="/img/loading.gif" lazyload alt="image-20200827223142047" style="zoom:33%"><ol><li><p>指定名称和位置</p><p>写自己喜欢的名称，放自己喜欢的文件夹里</p></li><li><p>指定代数</p><p>第一代</p></li><li><p>分配内存</p><p>不用太多，一般512MB足矣，至少128MB</p></li><li><p>配置网络</p><p>在下拉选项卡中选择先前作为WAN口添加的虚拟网络交换机</p></li><li><p>连接虚拟硬盘</p><p>将步骤2.3中的.vhdx格式虚拟硬盘文件放到你喜欢的文件夹里边</p><p>选择<code>使用现有虚拟硬盘</code>，选择该.vhdx文件</p><p>点击完成后即可在Hyper-V管理器中看到添加的虚拟机条目了。</p><p>右键点击设置，在<code>添加硬件</code>中选择<code>网络适配器</code>，在虚拟交换机中选择先前新建的LAN口虚拟交换机</p><img src="/2020/08/HyperWRT/image-20200827223840588.webp" srcset="/img/loading.gif" lazyload alt="image-20200827223840588" style="zoom:33%"></li></ol><p>配置如图所示</p><h2 id="4-配置OpenWRT"><a href="#4-配置OpenWRT" class="headerlink" title="4. 配置OpenWRT"></a>4. 配置OpenWRT</h2><h3 id="4-1-配置OpenWRT网络设置"><a href="#4-1-配置OpenWRT网络设置" class="headerlink" title="4.1 配置OpenWRT网络设置"></a>4.1 配置OpenWRT网络设置</h3><p><em>注：此处需要一些Linux操作系统基础，基本命令不再赘述</em></p><p>在Hyper-V管理器中右键虚拟机条目，选择<code>连接</code>，再点击<code>启动</code></p><p>等待几秒后内核启动完成，按下Enter可激活当前console，如图</p><img src="/2020/08/HyperWRT/image-20200827224420493.webp" srcset="/img/loading.gif" lazyload alt="image-20200827224420493" style="zoom:33%"><p>使用vi编辑网络配置文件</p><p><code>vi /etc/config/network</code></p><p>按下<code>i</code>进入编辑模式</p><p>编辑<code>config interface &#39;lan&#39;</code>部分</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">config interface <span class="hljs-string">&#x27;lan&#x27;</span><br>        <span class="hljs-keyword">option</span> <span class="hljs-keyword">type</span> <span class="hljs-string">&#x27;bridge&#x27;</span><br>        <span class="hljs-keyword">option</span> ifname <span class="hljs-string">&#x27;eth1&#x27;</span><br>        <span class="hljs-keyword">option</span> proto <span class="hljs-string">&#x27;static&#x27;</span><br>        <span class="hljs-keyword">option</span> ipaddr <span class="hljs-string">&#x27;192.168.30.1&#x27;</span><br>        <span class="hljs-keyword">option</span> netmask <span class="hljs-string">&#x27;255.255.255.0&#x27;</span><br>        <span class="hljs-keyword">option</span> ip6assign <span class="hljs-string">&#x27;60&#x27;</span><br></code></pre></td></tr></table></figure><p><code>ifname</code>处填写先前作为LAN的网卡在OpenWRT中的网卡名称</p><p><em>一般在Hyper-V创建虚拟机时先添加的为eth0，后添加的为eth1，以此类推（有待考证）</em></p><p><del>反正就两个网卡eth0和eth1，不行就在配置文件里交换一下试试呗</del></p><p>ipaddr部分可以填写自己喜欢的C类网段，此处为OpenWRT虚拟机在LAN网络中的地址，子网掩码默认255.255.255.0，即前缀24，允许访问192.168.30.0/24的网段，子网掩码的工作方式此处不赘述。</p><p>之后在文件末尾添加</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">config <span class="hljs-keyword">interface</span> &#x27;<span class="hljs-symbol">wan</span>&#x27;<br>        <span class="hljs-symbol">option</span> <span class="hljs-symbol">ifname</span> &#x27;<span class="hljs-symbol">eth0</span>&#x27;<br>        <span class="hljs-symbol">option</span> <span class="hljs-symbol">proto</span> &#x27;<span class="hljs-symbol">dhcp</span>&#x27;<br></code></pre></td></tr></table></figure><p>此处意味使用dhcp协议从上级路由获取ip地址配置，具体情况需要由你所在的网络环境决定，一般来说自动获取即可</p><p>按下<code>Esc</code>退出编辑模式，输入<code>:wq</code>保存并退出</p><p>输入<code>service network restart</code>重启OpenWRT的网络服务，使得新配置文件生效</p><p>完成后输入<code>ifconfig</code>查看网卡配置</p><p>以下为我的情况</p><p>仅截取eth0（WAN）、eth1（LAN）</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">eth0</span>      Link encap:Ethernet  HWaddr <span class="hljs-number">00</span>:<span class="hljs-number">15</span>:<span class="hljs-number">5</span>D:<span class="hljs-number">38</span>:<span class="hljs-number">01</span>:<span class="hljs-number">06</span><br>          <span class="hljs-attribute">inet</span> addr:<span class="hljs-number">192.168.200.25</span>  Bcast:<span class="hljs-number">192.168.200.255</span>  Mask:<span class="hljs-number">255.255.255.0</span><br>          <span class="hljs-attribute">inet6</span> addr: fe<span class="hljs-number">80</span>::<span class="hljs-number">215</span>:<span class="hljs-number">5</span>dff:fe<span class="hljs-number">38</span>:<span class="hljs-number">106</span>/<span class="hljs-number">64</span> Scope:Link<br>          <span class="hljs-attribute">UP</span> BROADCAST RUNNING MULTICAST  MTU:<span class="hljs-number">1500</span>  Metric:<span class="hljs-number">1</span><br>          <span class="hljs-attribute">RX</span> packets:<span class="hljs-number">1104838</span> errors:<span class="hljs-number">0</span> dropped:<span class="hljs-number">0</span> overruns:<span class="hljs-number">0</span> frame:<span class="hljs-number">0</span><br>          <span class="hljs-attribute">TX</span> packets:<span class="hljs-number">507163</span> errors:<span class="hljs-number">0</span> dropped:<span class="hljs-number">0</span> overruns:<span class="hljs-number">0</span> carrier:<span class="hljs-number">0</span><br>          <span class="hljs-attribute">collisions</span>:<span class="hljs-number">0</span> txqueuelen:<span class="hljs-number">1000</span><br>          <span class="hljs-attribute">RX</span> bytes:<span class="hljs-number">469979594</span> (<span class="hljs-number">448</span>.<span class="hljs-number">2</span> MiB)  TX bytes:<span class="hljs-number">39450872</span> (<span class="hljs-number">37</span>.<span class="hljs-number">6</span> MiB)<br><br><span class="hljs-attribute">eth1</span>      Link encap:Ethernet  HWaddr <span class="hljs-number">00</span>:<span class="hljs-number">15</span>:<span class="hljs-number">5</span>D:<span class="hljs-number">38</span>:<span class="hljs-number">01</span>:<span class="hljs-number">07</span><br>          <span class="hljs-attribute">UP</span> BROADCAST RUNNING MULTICAST  MTU:<span class="hljs-number">1500</span>  Metric:<span class="hljs-number">1</span><br>          <span class="hljs-attribute">RX</span> packets:<span class="hljs-number">379616</span> errors:<span class="hljs-number">0</span> dropped:<span class="hljs-number">0</span> overruns:<span class="hljs-number">0</span> frame:<span class="hljs-number">0</span><br>          <span class="hljs-attribute">TX</span> packets:<span class="hljs-number">878441</span> errors:<span class="hljs-number">0</span> dropped:<span class="hljs-number">0</span> overruns:<span class="hljs-number">0</span> carrier:<span class="hljs-number">0</span><br>          <span class="hljs-attribute">collisions</span>:<span class="hljs-number">0</span> txqueuelen:<span class="hljs-number">1000</span><br>          <span class="hljs-attribute">RX</span> bytes:<span class="hljs-number">26894447</span> (<span class="hljs-number">25</span>.<span class="hljs-number">6</span> MiB)  TX bytes:<span class="hljs-number">449428514</span> (<span class="hljs-number">428</span>.<span class="hljs-number">6</span> MiB)<br></code></pre></td></tr></table></figure><p>现在即为完成了OpenWRT的配置，可在OpenWRT中尝试输入</p><p><code>nslookup baidu.com</code> 或 <code>ping baidu.com</code></p><p>检验网络连通性</p><p>如果网络通畅，即可再次打开Hyper-V的<code>虚拟交换机管理器</code></p><img src="/2020/08/HyperWRT/image-20200827230638876.webp" srcset="/img/loading.gif" lazyload alt="image-20200827230638876" style="zoom:50%"><p>取消勾选<code>允许管理操作系统共享此网络适配器</code></p><p>现在Windows将会以虚拟机的OpenWRT作为上级路由访问互联网</p><p>注：一开始Windows有可能无法正确获取LAN网卡上的dhcp配置，需要手动在 控制面板 &gt; 网络和 Internet &gt; 网络连接 中指定LAN网卡的静态ip配置，将ip地址设置为先前OpenWRTip地址的同一网段，子网掩码设置为255.255.255.0，网关和首选DNS设置为OpenWRT的地址</p><p>如果配置正常工作，Windows的网络状态将会如下</p><img src="/2020/08/HyperWRT/image-20200827231140238.webp" srcset="/img/loading.gif" lazyload alt="image-20200827231140238" style="zoom:50%"><p>WiFi显示无Internet，网络连接状态图标为网线连接</p><img src="/2020/08/HyperWRT/image-20200827231427864.webp" srcset="/img/loading.gif" lazyload alt="image-20200827231427864" style="zoom:50%"><p>设置中看到的图样如图所示</p><h3 id="4-2-配置OpenWRT的WebUI"><a href="#4-2-配置OpenWRT的WebUI" class="headerlink" title="4.2 配置OpenWRT的WebUI"></a>4.2 配置OpenWRT的WebUI</h3><p>输入<code>opkg update</code>，更新opkg的软件源</p><p><em>opkg为OpenWRT系发行版常用的包管理器</em></p><p>默认连接download.openwrt.org官方站点获取更新，若网络连接较慢可更换为国内镜像</p><p>由官方站点更换为清华镜像：</p><p><code>sed -i &#39;s_downloads.openwrt.org_mirrors.tuna.tsinghua.edu.cn/openwrt_&#39; /etc/opkg/distfeeds.conf</code></p><p>由官方站点更换为北外镜像：</p><p><code>sed -i &#39;s_downloads.openwrt.org_mirrors.bfsu.edu.cn/openwrt_&#39; /etc/opkg/distfeeds.conf</code></p><p>除此之外腾讯云也提供OpenWRT镜像服务，需要的朋友可自行更换</p><p>完成后可安装软件包</p><p><code>opkg install *</code></p><p>，*处替换为需要安装的软件包</p><ul><li>luci</li><li>luci-base</li><li>luci-compat</li><li>luci-i18n-base-zh-cn</li></ul><p>安装好后，即可在浏览器中输入OpenWRT的地址，打开WebUI管理页面</p><img src="/2020/08/HyperWRT/image-20200827231611178.webp" srcset="/img/loading.gif" lazyload alt="image-20200827231611178" style="zoom:50%"><p><em>此处我配置好后更改了主题</em></p><h2 id="5-其它事项"><a href="#5-其它事项" class="headerlink" title="5. 其它事项"></a>5. 其它事项</h2><p>现在你的系统网络流量将会经由OpenWRT虚拟机转发，可以在OpenWRT中安装插件或其它软件来实现不同的功能</p><img src="/2020/08/HyperWRT/image-20200827231902745.webp" srcset="/img/loading.gif" lazyload alt="image-20200827231902745" style="zoom:33%"><p>详细步骤和教程请自行搜索，请不要将本教程用于非法用途</p><p>若需要其它的设备同样使用该OpenWRT虚拟机，可使用桥接网卡以旁路路由的架构连入本地网络中，详细教程以后有时间再说吧</p><p>Vlist 2020年8月27日 初稿</p></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/%E6%8A%80%E6%9C%AF/">技术</a> <a class="hover-with-bg" href="/tags/%E7%BD%91%E7%BB%9C/">网络</a> <a class="hover-with-bg" href="/tags/OpenWrt/">OpenWrt</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext"><article class="post-prev col-6"><a href="/2020/08/build-Hexo/"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">在Windows中使用Hexo编写博客</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"></article></div></div><article class="comments" id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments("#valine",(function(){Fluid.utils.createScript("https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js",(function(){var e=Object.assign({appId:"P0S0As2s6zKSkCQ4s0zGEuIx-gzGzoHsz",appKey:"MikME4wzroydcSoh25JUkWL1",placeholder:"说点什么",path:"window.location.pathname",avatar:"retro",meta:["nick","mail","link"],pageSize:10,lang:"zh-CN",highlight:!0,recordIP:!0,serverURLs:"https://p0s0as2s.lc-cn-n1-shared.com",emojiCDN:null,emojiMaps:null,enableQQ:!1,requiredFields:[],appid:"P0S0As2s6zKSkCQ4s0zGEuIx-gzGzoHsz",appkey:"MikME4wzroydcSoh25JUkWL1"},{el:"#valine",path:window.location.pathname});new Valine(e)}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script src="/js/local-search.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script src="/js/boot.js"></script></body></html>